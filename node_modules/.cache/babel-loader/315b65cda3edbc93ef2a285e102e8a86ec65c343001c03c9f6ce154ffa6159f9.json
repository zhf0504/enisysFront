{"ast":null,"code":"import BaseTitle from '@/components/BaseTitle.vue';\nimport { ref, reactive } from 'vue';\nimport employeeList from '@/assets/JsonData/member/EmployeeList.json';\nimport { watch } from 'vue';\nexport default {\n  components: {\n    BaseTitle\n  },\n  props: {\n    isVisible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, {\n    emit\n  }) {\n    // 画面のラベルや設定項目\n    const screen = reactive({\n      label: {\n        title: '従業員検索',\n        jigyosyo: '事業所',\n        jugyoin_nm: '従業員氏名',\n        button: {\n          backBtn: '閉じる',\n          searchIcon: 'mdi-magnify',\n          searchBtn: '検索',\n          selectBtn: '選択'\n        },\n        table: [{\n          title: '従業員氏名',\n          key: 'jugyoin_nm'\n        }, {\n          title: '事業所',\n          key: 'jigyosyo_nm'\n        }, {\n          title: '職種',\n          key: 'syokusyu'\n        }, {\n          title: '社給携帯番号',\n          key: 'social_give_phone'\n        }],\n        jigyoshoLists: ['', '東京事業所', '大阪事業所', '沖縄事業所', '福岡事業所', '札幌事業所', '九州事業所']\n      },\n      selectedJigyosho: '',\n      inputJugyoinNm: '',\n      isOpenTable: false,\n      selectedRow: '',\n      openModalShienFlag: props.isVisible,\n      selectedShientanto: props.selectedData\n    });\n    const requestDataList = ref(employeeList);\n\n    // モーダル表示の監視\n    watch(() => props.isVisible, newVal => {\n      screen.openModalShienFlag = newVal;\n    });\n\n    // モーダルを閉じる関数\n    const closeDialog = () => {\n      screen.openModalShienFlag = false;\n      screen.isOpenTable = false;\n      screen.selectedJigyosho = '';\n      screen.inputJugyoinNm = '';\n      screen.selectedRow = '';\n      emit('update:isVisible', false);\n    };\n\n    // 行を選択する関数\n    const selectRow = index => {\n      screen.selectedRow = index;\n    };\n\n    // フォームを送信する関数\n    const handleSubmit = () => {\n      if (screen.selectedRow || screen.selectedRow === 0) {\n        const selected = requestDataList.value[screen.selectedRow];\n        const selectedShientanto = selected.idCode + selected.jugyoin_nm;\n        emit('selectedShientanto', selectedShientanto);\n        emit('selectedTanto', requestDataList.value[screen.selectedRow]);\n        closeDialog();\n      }\n    };\n    return {\n      screen,\n      requestDataList,\n      closeDialog,\n      selectRow,\n      handleSubmit\n    };\n  }\n};","map":{"version":3,"names":["BaseTitle","ref","reactive","employeeList","watch","components","props","isVisible","type","Boolean","default","setup","emit","screen","label","title","jigyosyo","jugyoin_nm","button","backBtn","searchIcon","searchBtn","selectBtn","table","key","jigyoshoLists","selectedJigyosho","inputJugyoinNm","isOpenTable","selectedRow","openModalShienFlag","selectedShientanto","selectedData","requestDataList","newVal","closeDialog","selectRow","index","handleSubmit","selected","value","idCode"],"sources":["C:\\Users\\zhenghoufeng\\Desktop\\project\\enisysFront1\\src\\views\\modal\\CMN005_EmpSearch.vue"],"sourcesContent":["<template>\r\n  <VDialog v-model=\"screen.openModalShienFlag\" @click:outside=\"closeDialog\">\r\n    <VContainer id=\"modal\">\r\n      <!-- タイトルコンポーネント -->\r\n      <BaseTitle :title=\"screen.label.title\" />\r\n      <VForm class=\"form-group\">\r\n        <VRow class=\"custom-input form-row\" justify-content=\"center\">\r\n          <!-- 事業所選択フィールド -->\r\n          <VCol cols=\"4\" class=\"form-row-sub1\">\r\n            <h3 class=\"custom-label has-asterisk\">{{ screen.label.jigyosyo }}</h3>\r\n            <VSelect :items=\"screen.label.jigyoshoLists\" v-model=\"screen.selectedJigyosho\" hide-details></VSelect>\r\n          </VCol>\r\n          <!-- 従業員氏名入力フィールド -->\r\n          <VCol cols=\"4\" class=\"form-row-sub2\">\r\n            <h3 class=\"custom-label\">{{ screen.label.jugyoin_nm }}</h3>\r\n            <VTextField v-model=\"screen.inputJugyoinNm\" hide-details></VTextField>\r\n          </VCol>\r\n        </VRow>\r\n        <!-- ボタン -->\r\n        <VRow class=\"form-row-btn\">\r\n          <VBtn class=\"custom-btn\" color=\"primary\" @click=\"closeDialog\">{{ screen.label.button.backBtn }}</VBtn>\r\n          <VBtn class=\"custom-btn\" color=\"primary\" @click=\"screen.isOpenTable = true\">\r\n            <VIcon>{{ screen.label.button.searchIcon }}</VIcon>\r\n            {{ screen.label.button.searchBtn }}\r\n          </VBtn>\r\n        </VRow>\r\n        <!-- 検索結果テーブル -->\r\n        <div v-if=\"screen.isOpenTable\" class=\"form-table\">\r\n          <VTable class=\"form-table-sub\">\r\n            <thead>\r\n              <tr>\r\n                <th class=\"form-table-title\" v-for=\"(header, index) in screen.label.table\" :key=\"index\">\r\n                  {{ header.title }}\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr\r\n                v-for=\"(item, index) in requestDataList\"\r\n                :key=\"index\"\r\n                :class=\"{ 'selected-row': screen.selectedRow === index }\"\r\n                @click=\"selectRow(index)\"\r\n              >\r\n                <td>{{ item.jugyoin_nm }}</td>\r\n                <td>{{ item.jigyosyo_nm }}</td>\r\n                <td>{{ item.syokusyu }}</td>\r\n                <td>{{ item.social_give_phone }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </VTable>\r\n          <!-- 選択ボタン -->\r\n          <VBtn class=\"custom-btn\" color=\"primary\" @click=\"handleSubmit\">\r\n            {{ screen.label.button.selectBtn }}\r\n          </VBtn>\r\n        </div>\r\n      </VForm>\r\n    </VContainer>\r\n  </VDialog>\r\n</template>\r\n\r\n<script>\r\n  import BaseTitle from '@/components/BaseTitle.vue';\r\n  import { ref, reactive } from 'vue';\r\n  import employeeList from '@/assets/JsonData/member/EmployeeList.json';\r\n  import { watch } from 'vue';\r\n\r\n  export default {\r\n    components: { BaseTitle },\r\n    props: {\r\n      isVisible: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    setup(props, { emit }) {\r\n      // 画面のラベルや設定項目\r\n      const screen = reactive({\r\n        label: {\r\n          title: '従業員検索',\r\n          jigyosyo: '事業所',\r\n          jugyoin_nm: '従業員氏名',\r\n          button: {\r\n            backBtn: '閉じる',\r\n            searchIcon: 'mdi-magnify',\r\n            searchBtn: '検索',\r\n            selectBtn: '選択'\r\n          },\r\n          table: [\r\n            { title: '従業員氏名', key: 'jugyoin_nm' },\r\n            { title: '事業所', key: 'jigyosyo_nm' },\r\n            { title: '職種', key: 'syokusyu' },\r\n            { title: '社給携帯番号', key: 'social_give_phone' }\r\n          ],\r\n          jigyoshoLists: ['', '東京事業所', '大阪事業所', '沖縄事業所', '福岡事業所', '札幌事業所', '九州事業所']\r\n        },\r\n        selectedJigyosho: '',\r\n        inputJugyoinNm: '',\r\n        isOpenTable: false,\r\n        selectedRow: '',\r\n        openModalShienFlag: props.isVisible,\r\n        selectedShientanto: props.selectedData\r\n      });\r\n\r\n      const requestDataList = ref(employeeList);\r\n\r\n      // モーダル表示の監視\r\n      watch(\r\n        () => props.isVisible,\r\n        (newVal) => {\r\n          screen.openModalShienFlag = newVal;\r\n        }\r\n      );\r\n\r\n      // モーダルを閉じる関数\r\n      const closeDialog = () => {\r\n        screen.openModalShienFlag = false;\r\n        screen.isOpenTable = false;\r\n        screen.selectedJigyosho = '';\r\n        screen.inputJugyoinNm = '';\r\n        screen.selectedRow = '';\r\n        emit('update:isVisible', false);\r\n      };\r\n\r\n      // 行を選択する関数\r\n      const selectRow = (index) => {\r\n        screen.selectedRow = index;\r\n      };\r\n\r\n      // フォームを送信する関数\r\n      const handleSubmit = () => {\r\n        if (screen.selectedRow || screen.selectedRow === 0) {\r\n          const selected = requestDataList.value[screen.selectedRow];\r\n          const selectedShientanto = selected.idCode + selected.jugyoin_nm;\r\n          emit('selectedShientanto', selectedShientanto);\r\n          emit('selectedTanto', requestDataList.value[screen.selectedRow]);\r\n          closeDialog();\r\n        }\r\n      };\r\n\r\n      return {\r\n        screen,\r\n        requestDataList,\r\n        closeDialog,\r\n        selectRow,\r\n        handleSubmit\r\n      };\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  #modal {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    width: 1000px;\r\n    z-index: 1001;\r\n  }\r\n\r\n  .dialog-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    z-index: 1000;\r\n  }\r\n\r\n  :deep(.custom-input .v-input__control) {\r\n    background-color: #ffffff;\r\n    width: 100%;\r\n    height: 50px;\r\n  }\r\n\r\n  .custom-label {\r\n    width: 120px;\r\n  }\r\n\r\n  .form-group {\r\n    padding: 0 15px 10px;\r\n  }\r\n  .form-row {\r\n    display: flex;\r\n    padding-bottom: 40px;\r\n    justify-content: center;\r\n  }\r\n\r\n  .form-table .custom-btn {\r\n    float: right;\r\n    margin-right: 3%;\r\n    font-size: 18px;\r\n    border-radius: 17px;\r\n  }\r\n\r\n  .form-table-sub {\r\n    margin: 30px 0;\r\n    max-height: 300px;\r\n    overflow-y: auto;\r\n  }\r\n\r\n  .form-table-sub thead {\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 1;\r\n  }\r\n\r\n  .form-table-sub,\r\n  .form-table-sub th,\r\n  .form-table-sub thead {\r\n    border: 1px solid #777777 !important;\r\n  }\r\n\r\n  .form-table-sub td {\r\n    border: 1px solid #f0f0f0;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .form-table-sub th {\r\n    font-size: 18px;\r\n    background-color: #97d885;\r\n    color: white;\r\n    font-weight: bolder !important;\r\n    text-align: center !important;\r\n  }\r\n\r\n  .selected-row {\r\n    background-color: #e2efda;\r\n    border: 1px solid black !important;\r\n  }\r\n\r\n  .form-row-sub1 {\r\n    display: flex;\r\n    margin-right: 12.5%;\r\n  }\r\n  .form-row-sub2 {\r\n    display: flex;\r\n    margin-left: 12.5%;\r\n  }\r\n\r\n  .form-row-btn {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin: 1% 3.5%;\r\n  }\r\n\r\n  /* SP版のCSS */\r\n  @media (max-width: 850px) {\r\n    #modal {\r\n      padding: 18px 12px;\r\n      max-height: 600px;\r\n      overflow-y: auto;\r\n    }\r\n    .form-group {\r\n      padding: 0;\r\n    }\r\n    .form-row {\r\n      width: 93%;\r\n      margin: 0 auto;\r\n      padding: 0 auto;\r\n      display: block;\r\n    }\r\n    .form-row h3 {\r\n      width: 115px;\r\n    }\r\n    .form-row-sub1,\r\n    .form-row-sub2 {\r\n      margin: 0;\r\n      min-width: 100%;\r\n    }\r\n    .form-table-title:nth-child(4),\r\n    .form-table-sub tbody tr td:nth-child(4) {\r\n      display: none;\r\n    }\r\n  }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}